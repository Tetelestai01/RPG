<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>RPG de Texto - Betsim</title>
  <style>
    body {
      background: #111;
      color: #f4f4f4;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    #hud {
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px;
      background: #222;
      border-bottom: 2px solid #555;
      flex-wrap: wrap;
    }
    #hud div {
      margin: 5px;
      font-size: 14px;
    }
    #game {
      padding: 20px;
    }
    button {
      background: #444;
      color: #fff;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 5px;
      font-size: 16px;
    }
    button:hover {
      background: #666;
    }
    #log {
      margin-top: 20px;
      padding: 10px;
      background: #222;
      border-radius: 5px;
      text-align: left;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <!-- HUD -->
  <div id="hud">
    <div id="playerName">Her√≥i</div>
    <div id="stats">PV: 30 | F(3) | V(3) | D(2) | A(2)</div>
    <div id="gold">Ouro: 50</div>
    <div id="xp">XP: 0 / 100</div>
    <div id="level">N√≠vel: 1</div>
    <div id="hand">M√£o: (vazio)</div>
  </div>

  <!-- √Årea do jogo -->
  <div id="game">
    <h2>O Chamado do Rei Robert</h2>
    <p>O Rei Robert convoca voc√™ para uma miss√£o: recuperar os quatro peda√ßos da chave lend√°ria que podem destruir o drag√£o de Luparus.</p>
    <button onclick="criarFicha()">Criar Ficha do Personagem</button>
    <div id="acoes"></div>
    <div id="log"></div>
  </div>

  <script>
    let jogador = {
      nome: "Her√≥i",
      nivel: 1,
      xp: 0,
      xpProximo: 100,
      ouro: 50,
      vigor: 3,
      forca: 3,
      destreza: 2,
      armadura: 2,
      pv: 30,
      pvMax: 30,
      mao: null,
      inventario: []
    };

    function atualizarHUD() {
      document.getElementById("playerName").innerText = jogador.nome;
      document.getElementById("stats").innerText =
        `PV: ${jogador.pv}/${jogador.pvMax} | F(${jogador.forca}) | V(${jogador.vigor}) | D(${jogador.destreza}) | A(${jogador.armadura})`;
      document.getElementById("gold").innerText = "Ouro: " + jogador.ouro;
      document.getElementById("xp").innerText = `XP: ${jogador.xp} / ${jogador.xpProximo}`;
      document.getElementById("level").innerText = "N√≠vel: " + jogador.nivel;
      document.getElementById("hand").innerText = "M√£o: " + (jogador.mao ? jogador.mao : "(vazio)");
    }

    function log(msg) {
      document.getElementById("log").innerHTML += `<p>${msg}</p>`;
      document.getElementById("log").scrollTop = document.getElementById("log").scrollHeight;
    }

    function criarFicha() {
      jogador.nome = prompt("Digite o nome do seu her√≥i:", "Her√≥i");
      if (!jogador.nome) jogador.nome = "Her√≥i";
      log(`‚ú® Ficha criada! Bem-vindo, ${jogador.nome}. Sua aventura come√ßa.`);
      mostrarAcoes();
      atualizarHUD();
    }

    function mostrarAcoes() {
      document.getElementById("acoes").innerHTML = `
        <button onclick="explorar('cidade')">Ir √† Cidade</button>
        <button onclick="explorar('floresta')">Explorar a Floresta</button>
        <button onclick="explorar('caverna')">Investigar a Caverna</button>
        <button onclick="abrirInventario()">Invent√°rio</button>
      `;
    }

    function explorar(local) {
      if (local === "cidade") {
        log("Voc√™ chega √† cidade. O mercador abre sua loja.");
        abrirLoja();
        ganharXP("descoberta");
      } else if (local === "floresta") {
        log("Na floresta voc√™ encontra um inimigo!");
        iniciarBatalha("Inimigo da Floresta", 2, 2, 1, 20, 30);
      } else if (local === "caverna") {
        log("Voc√™ encontra uma caverna sombria... dentro pode estar um peda√ßo da chave!");
        iniciarBatalha("Guardi√£o da Caverna", 3, 3, 2, 30, 100);
      }
    }

    function abrirInventario() {
      let inv = jogador.inventario.length > 0 ? jogador.inventario.join(", ") : "(vazio)";
      log(`üì¶ Invent√°rio: ${inv}`);
      if (jogador.inventario.includes("Po√ß√£o")) {
        document.getElementById("acoes").innerHTML += `<button onclick="usarPocao()">Usar Po√ß√£o</button>`;
      }
    }

    function usarPocao() {
      let index = jogador.inventario.indexOf("Po√ß√£o");
      if (index > -1) {
        jogador.inventario.splice(index, 1);
        jogador.pv = Math.min(jogador.pv + 10, jogador.pvMax);
        log("Voc√™ usou uma po√ß√£o e recuperou 10 PV!");
        atualizarHUD();
      }
    }

    function abrirLoja() {
      document.getElementById("acoes").innerHTML = `
        <button onclick="comprar('Espada +1',20)">Comprar Espada +1 (20 ouro)</button>
        <button onclick="comprar('Po√ß√£o',10)">Comprar Po√ß√£o (10 ouro)</button>
        <button onclick="mostrarAcoes()">Sair da Loja</button>
      `;
    }

    function comprar(item, preco) {
      if (jogador.ouro >= preco) {
        jogador.ouro -= preco;
        jogador.inventario.push(item);
        log(`Voc√™ comprou ${item} por ${preco} moedas de ouro.`);
        atualizarHUD();
      } else {
        log("Voc√™ n√£o tem ouro suficiente!");
      }
    }

    // Sistema de XP
    function ganharXP(tipo) {
      let ganho = 0;
      switch (tipo) {
        case 'fraco': ganho = Math.floor(Math.random() * 10) + 5; break;
        case 'medio': ganho = Math.floor(Math.random() * 15) + 20; break;
        case 'forte': ganho = Math.floor(Math.random() * 25) + 40; break;
        case 'chefe': ganho = Math.floor(Math.random() * 50) + 100; break;
        case 'missao': ganho = Math.floor(Math.random() * 40) + 50; break;
        case 'descoberta': ganho = 10; break;
      }

      jogador.xp += ganho;
      log(`Voc√™ ganhou ${ganho} XP!`);

      while (jogador.xp >= jogador.xpProximo) {
        jogador.xp -= jogador.xpProximo;
        jogador.nivel++;
        jogador.xpProximo = Math.floor(jogador.xpProximo * 1.5);
        jogador.forca++;
        jogador.vigor++;
        jogador.destreza++;
        jogador.armadura++;
        jogador.pvMax += 10;
        jogador.pv = jogador.pvMax;
        jogador.ouro += 5;
        log(`‚ú® Voc√™ subiu para o N√çVEL ${jogador.nivel}!`);
      }
      atualizarHUD();
    }

    // Sistema de batalha
    function iniciarBatalha(nome, forca, vigor, armadura, pv, xpReward) {
      let inimigo = { nome, forca, vigor, armadura, pv, pvMax: pv };
      log(`‚öîÔ∏è Um ${inimigo.nome} aparece!`);

      let intervalo = setInterval(() => {
        if (jogador.pv <= 0 || inimigo.pv <= 0) {
          clearInterval(intervalo);
          if (jogador.pv <= 0) {
            log("üíÄ Voc√™ foi derrotado...");
          } else {
            log(`üèÜ Voc√™ derrotou ${inimigo.nome}!`);
            ganharXP("forte");
          }
          return;
        }

        // Jogador ataca
        let dadoAtaque = Math.floor(Math.random() * 6) + 1;
        let ataque = jogador.destreza + dadoAtaque + jogador.forca;
        let dadoDefesaInimigo = Math.floor(Math.random() * 6) + 1;
        let defesa = inimigo.armadura + dadoDefesaInimigo;
        log(`üé≤ Voc√™ ataca: Destreza ${jogador.destreza} + Dado ${dadoAtaque} + For√ßa ${jogador.forca} = ${ataque}`);
        log(`üõ°Ô∏è Inimigo defende: Armadura ${inimigo.armadura} + Dado ${dadoDefesaInimigo} = ${defesa}`);
        if (ataque > defesa) {
          inimigo.pv -= (ataque - defesa);
          log(`üí• Voc√™ causou ${ataque - defesa} de dano!`);
        } else {
          log("O inimigo bloqueou seu ataque!");
        }

        // Inimigo ataca
        let dadoAtaqueInimigo = Math.floor(Math.random() * 6) + 1;
        let ataqueInimigo = inimigo.destreza ? inimigo.destreza + dadoAtaqueInimigo + inimigo.forca : inimigo.forca + dadoAtaqueInimigo;
        let dadoDefesaJogador = Math.floor(Math.random() * 6) + 1;
        let defesaJogador = jogador.armadura + dadoDefesaJogador;
        log(`üé≤ ${inimigo.nome} ataca: For√ßa ${inimigo.forca} + Dado ${dadoAtaqueInimigo} = ${ataqueInimigo}`);
        log(`üõ°Ô∏è Voc√™ defende: Armadura ${jogador.armadura} + Dado ${dadoDefesaJogador} = ${defesaJogador}`);
        if (ataqueInimigo > defesaJogador) {
          jogador.pv -= (ataqueInimigo - defesaJogador);
          log(`üí• Voc√™ recebeu ${ataqueInimigo - defesaJogador} de dano!`);
        } else {
          log("Voc√™ bloqueou o ataque inimigo!");
        }
        atualizarHUD();
      }, 4000);
    }

    atualizarHUD();
  </script>
</body>
</html>
